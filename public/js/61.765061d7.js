"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[61],{61:function(t,e,r){r.r(e),r.d(e,{default:function(){return b}});var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-container",{attrs:{"grid-list-xs":""}},[r("v-overlay",{attrs:{value:t.overlay}},[r("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}}),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.overlay=!1}}},[r("v-icon",[t._v("mdi-close")])],1)],1),r("v-overlay",{attrs:{value:t.overlayUnclosed}},[r("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}})],1),r("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[r("v-list",{staticClass:"white--text"},[r("v-list-item",[r("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(e){return t.$router.push("/resource/view/practitioner/"+t.practitionerId)}}},[r("v-icon",{attrs:{light:"",left:""}},[t._v("mdi-eye")]),r("span",[t._v("View Health Profession")])],1)],1),t.canAddSupervisorApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(e){return t.$router.push("/questionnaire/supervisor-leave-approval/supervisor-leave-approval?practitioner="+t.practitionerId+"&leaverequest="+t.queries.id)}}},[r("v-icon",{attrs:{light:"",left:""}},[t._v("mdi-plus")]),r("span",[t._v("Add Approval")])],1)],1):t._e(),t.canAddSupervisorSupervisorApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(e){return t.$router.push("/questionnaire/supervisor-supervisor-leave-approval/supervisor-supervisor-leave-approval?practitioner="+t.practitionerId+"&leaverequest="+t.queries.id)}}},[r("v-icon",{attrs:{light:"",left:""}},[t._v("mdi-plus")]),r("span",[t._v("Add Approval")])],1)],1):t._e(),t.canAddHRApproval?r("v-list-item",[r("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(e){return t.$router.push("/questionnaire/hr-leave-approval/hr-leave-approval?practitioner="+t.practitionerId+"&leaverequest="+t.queries.id)}}},[r("v-icon",{attrs:{light:"",left:""}},[t._v("mdi-plus")]),r("span",[t._v("Add Approval")])],1)],1):t._e()],1)],1),r("v-row",[r("v-col",[t.leaveRequest.category?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(" Leave Request ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Leave Category")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.leaveRequest.category)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Start Date")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.leaveRequest.startDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("End Date")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.leaveRequest.endDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Return Date")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.leaveRequest.returnDate)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Days")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.leaveRequest.days)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Status")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.leaveRequest.status)+" ")])],1)],1)],1):t._e(),t.supervisorApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(" Immediate Supervisor Approval ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.supervisorApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.supervisorApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.supervisorApproval.description)+" ")])],1)],1)],1):t._e(),t.supervisorSupervisorApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(" Supervisor's Supervisor Approval ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.supervisorSupervisorApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.supervisorSupervisorApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.supervisorSupervisorApproval.description)+" ")])],1)],1)],1):t._e(),t.hrApproval.id?r("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[r("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[t._v(" HR Approval ")]),r("v-card-text",{staticClass:"my-3"},[r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Action")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.hrApproval.status)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Action Date")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.hrApproval.date)+" ")])],1),r("v-divider"),r("v-row",{staticClass:"justify-space-between"},[r("v-col",{attrs:{cols:"4"}},[r("span",{staticClass:"font-weight-bold"},[t._v("Description")])]),r("v-col",{attrs:{cols:"8"}},[t._v(" "+t._s(t.hrApproval.description)+" ")])],1)],1)],1):t._e()],1),r("v-col",{attrs:{cols:"3"}},[r("br"),r("leave-request-stepper",{attrs:{step:t.step,noSupervisorAppr:!t.supervisorApproval.id,noSupervisorSupervisorAppr:!t.supervisorSupervisorApproval.id,noHRApproval:!t.hrApproval.id,status:t.leaveRequest.status}})],1)],1)],1)},i=[];const a=r(7673);var o={props:["queries"],data(){return{overlay:!1,overlayUnclosed:!1,loading:!1,practitionerId:"",leaveRequest:{startDate:"",category:""},supervisorApproval:{id:""},supervisorSupervisorApproval:{id:""},hrApproval:{id:""},noSupervisor:!1,noSupervisorSupervisor:!1,supervisor:"",supervisorSupervisor:"",step:1}},computed:{canAddSupervisorApproval(){let t=this.$store.state.user.obj.resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===t.url));return!(!t||t.valueReference.reference!==this.supervisor||this.supervisorApproval.id)},canAddSupervisorSupervisorApproval(){let t=this.$store.state.user.obj.resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===t.url));return!(!t||t.valueReference.reference!==this.supervisorSupervisor||this.supervisorSupervisorApproval.id)},canAddHRApproval(){let t=this.$store.state.user.obj.resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===t.url));return!(!t||"Basic/na-hr-manager"!==t.valueReference.reference||this.hrApproval.id)}},methods:{getSupervisor(){let t,e={practitioner:this.practitionerId,_count:200,_sort:"-_id"};fetch("/fhir/PractitionerRole?"+a.stringify(e)).then((e=>e.json().then((async e=>{if(e&&e.entry&&e.entry.length)for(let s of e.entry)t?t.resource.id<s.resource.id&&(t=s):t=s;let r=t.resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/supervisor"===t.url));r?(this.supervisor=r.valueReference.reference,this.getSupervisorSupervisor(this.supervisor)):this.noSupervisor=!0}))))},getSupervisorSupervisor(t){let e,r={practitioner:t,_count:200,_sort:"-_id"};fetch("/fhir/PractitionerRole?"+a.stringify(r)).then((t=>t.json().then((async t=>{if(t&&t.entry&&t.entry.length)for(let s of t.entry)e?e.resource.id<s.resource.id&&(e=s):e=s;let r=e.resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/supervisor"===t.url));r?this.supervisorSupervisor=r.valueReference.reference:this.noSupervisorSupervisor=!0}))))},getLeave(){fetch("/fhir/Basic/"+this.queries.id).then((t=>t.json().then((async t=>{this.practitionerId=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===t.url)).valueReference.reference,this.practitionerId=this.practitionerId.split("/")[1],this.leaveRequest.startDate=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/start-date"===t.url)).valueDate,this.leaveRequest.endDate=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/end-date"===t.url)).valueDate,this.leaveRequest.returnDate=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/return-date"===t.url)).valueDate,this.leaveRequest.days=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/leave-days"===t.url))?.valueInteger,this.leaveRequest.status=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/leave-status"===t.url)).valueCoding.display,"Approved"===this.leaveRequest.status&&(this.step=4);let e=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/leave-category"===t.url)).valueReference.reference;await fetch("/fhir/"+e).then((t=>t.json().then((async t=>{this.leaveRequest.category=t.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/ihris-basic-name"===t.url)).valueString})))),this.getSupervisor(),this.getSupervisorApproval()}))))},getSupervisorApproval(){let t={_profile:"http://ihris.org/fhir/StructureDefinition/supervisor-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((t=>{t.entry&&t.entry.length&&(4!=this.step&&(this.step=2),this.supervisorApproval.id=t.entry[0].resource.id,this.supervisorApproval.status=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/supervisor-leave-status"===t.url)).valueCoding.display,this.supervisorApproval.date=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/action-date"===t.url)).valueDate,this.supervisorApproval.description=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/description"===t.url)).valueString,this.getSupervisorSupervisorApproval())}))))},getSupervisorSupervisorApproval(){let t={_profile:"http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((t=>{t.entry&&t.entry.length&&(4!=this.step&&(this.step=3),this.supervisorSupervisorApproval.id=t.entry[0].resource.id,this.supervisorSupervisorApproval.status=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-status"===t.url)).valueCoding.display,this.supervisorSupervisorApproval.date=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/action-date"===t.url)).valueDate,this.supervisorSupervisorApproval.description=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/description"===t.url)).valueString,this.getHRApproval())}))))},getHRApproval(){let t={_profile:"http://ihris.org/fhir/StructureDefinition/hr-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((t=>{t.entry&&t.entry.length&&(this.hrApproval.id=t.entry[0].resource.id,this.hrApproval.status=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/hr-leave-status"===t.url)).valueCoding.display,this.hrApproval.date=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/action-date"===t.url)).valueDate,this.hrApproval.description=t.entry[0].resource.extension.find((t=>"http://ihris.org/fhir/StructureDefinition/description"===t.url)).valueString)}))))}},created(){this.getLeave()},components:{"leave-request-stepper":()=>r.e(737).then(r.bind(r,737))}},n=o,l=r(3736),v=r(3453),p=r.n(v),u=r(3150),c=r(2371),h=r(7118),d=r(2102),f=r(4228),g=r(1418),y=r(6428),_=r(6816),S=r(7620),A=r(5132),w=r(1058),C=r(624),D=r(2877),x=(0,l.Z)(n,s,i,!1,null,null,null),b=x.exports;p()(x,{VBtn:u.Z,VCard:c.Z,VCardText:h.ZB,VCardTitle:h.EB,VCol:d.Z,VContainer:f.Z,VDivider:g.Z,VIcon:y.Z,VList:_.Z,VListItem:S.Z,VNavigationDrawer:A.Z,VOverlay:w.Z,VProgressCircular:C.Z,VRow:D.Z})}}]);
//# sourceMappingURL=61.765061d7.js.map