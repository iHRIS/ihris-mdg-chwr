{"version":3,"file":"js/fhir-primary.5dd423ea.js","mappings":"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","sources":["webpack://iHRIS-v5/../../../src/components/VSubheader/VSubheader.ts","webpack://iHRIS-v5/./src/components/fhir/fhir-code.vue?abee","webpack://iHRIS-v5/src/components/fhir/fhir-code.vue","webpack://iHRIS-v5/./src/components/fhir/fhir-code.vue?2b0c","webpack://iHRIS-v5/./src/components/fhir/fhir-code.vue","webpack://iHRIS-v5/./src/components/fhir/fhir-coding.vue?30b6","webpack://iHRIS-v5/src/components/fhir/fhir-coding.vue","webpack://iHRIS-v5/./src/components/fhir/fhir-coding.vue?c462","webpack://iHRIS-v5/./src/components/fhir/fhir-coding.vue","webpack://iHRIS-v5/./src/components/fhir/fhir-identifier.vue?d6fe","webpack://iHRIS-v5/src/components/fhir/fhir-identifier.vue","webpack://iHRIS-v5/./src/components/fhir/fhir-identifier.vue?b5be","webpack://iHRIS-v5/./src/components/fhir/fhir-identifier.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-element.vue?ab52","webpack://iHRIS-v5/src/components/ihris/ihris-element.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-element.vue?ad29","webpack://iHRIS-v5/./src/components/ihris/ihris-element.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-practitioner-intro.vue?f302","webpack://iHRIS-v5/src/components/ihris/ihris-practitioner-intro.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-practitioner-intro.vue?140f","webpack://iHRIS-v5/./src/components/ihris/ihris-practitioner-intro.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-resource.vue?8a26","webpack://iHRIS-v5/src/components/ihris/ihris-resource.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-resource.vue?2bc6","webpack://iHRIS-v5/./src/components/ihris/ihris-resource.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-secondary.vue?c512","webpack://iHRIS-v5/src/components/ihris/ihris-secondary.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-secondary.vue?1888","webpack://iHRIS-v5/./src/components/ihris/ihris-secondary.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-section.vue?1fb4","webpack://iHRIS-v5/src/components/ihris/ihris-section.vue","webpack://iHRIS-v5/./src/components/ihris/ihris-section.vue?96b4","webpack://iHRIS-v5/./src/components/ihris/ihris-section.vue"],"sourcesContent":["// Styles\nimport './VSubheader.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nexport default mixins(\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-subheader',\n\n  props: {\n    inset: Boolean,\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-subheader',\n      class: {\n        'v-subheader--inset': this.inset,\n        ...this.themeClasses,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    }, this.$slots.default)\n  },\n})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.hide)?_c('ihris-element',{attrs:{\"edit\":_vm.edit,\"loading\":_vm.loading},scopedSlots:_vm._u([{key:\"form\",fn:function(){return [_c('v-autocomplete',{attrs:{\"loading\":_vm.loading,\"label\":_vm.$t((\"App.fhir-resources-texts.\" + _vm.display)),\"items\":_vm.items.filter(function (x) { return !x.code.includes('(deactivated)'); }),\"outlined\":\"\",\"hide-details\":\"auto\",\"error-messages\":_vm.errors,\"item-text\":\"display\",\"item-value\":\"code\",\"disabled\":_vm.disabled,\"rules\":_vm.rules,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.display)))+\" \"),(_vm.required)?_c('span',{staticClass:\"red--text font-weight-bold\"},[_vm._v(\"*\")]):_vm._e()]},proxy:true}],null,false,3110236810),model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})]},proxy:true},{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.display)))+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.displayValue)+\" \")]},proxy:true}],null,false,2837257624)}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-element :edit=\"edit\" :loading=\"loading\" v-if=\"!hide\">\n    <template #form>\n      <v-autocomplete \n        :loading=\"loading\" \n        :label=\"$t(`App.fhir-resources-texts.${display}`)\"\n        v-model=\"value\" \n        :items=\"items.filter(x => !x.code.includes('(deactivated)'))\"\n        outlined \n        hide-details=\"auto\" \n        :error-messages=\"errors\"\n        item-text=\"display\"\n        item-value=\"code\"\n        :disabled=\"disabled\"\n        :rules=\"rules\"\n        dense\n        @change=\"errors = []\"\n      >\n        <template #label>{{$t(`App.fhir-resources-texts.${display}`)}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-autocomplete>\n    </template>\n    <template #header>\n      {{$t(`App.fhir-resources-texts.${display}`)}}\n    </template>\n    <template #value>\n      {{displayValue}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\nimport { eventBus } from \"@/main\";\nimport { dataDisplay } from \"@/mixins/dataDisplay\"\n\n/*\nconst itemSort = (a,b) => {\n  return (a.display === b.display ? (a.code === b.code ? 0 : (a.code < b.code ? -1: 1)) : (a.display < b.display ? -1 : 1) )\n}\n*/\nexport default {\n  name: \"fhir-code\",\n  props: [\"field\",\"min\",\"max\",\"base-min\",\"base-max\",\"label\",\"binding\",\"slotProps\",\"path\",\"edit\",\"sliceName\",\"readOnlyIfSet\",\"constraints\", \"displayCondition\", \"enableBehavior\"],\n  components: {\n    IhrisElement\n  },\n  mixins: [dataDisplay],\n  data: function() {\n    return {\n      value: \"\",\n      loading: true,\n      errors: [],\n      //error: false,\n      items: [],\n      source: { path: \"\", data: {}, binding: this.binding },\n      disabled: false,\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //this function is defined under dataDisplay mixin\n    this.hideShowField(this.displayCondition, this.enableBehavior)\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH CODE\",this.field,this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    value(val) {\n      eventBus.$emit(this.path, val)\n    }\n  },\n  methods: {\n    setupData() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          this.value = this.source.data\n          this.lockWatch = true\n          //console.log(\"SET value to \", this.source.data, this.slotProps.input)\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"STR FHIRPATH\", this.slotProps.source.data, this.field)\n          let value = null\n          if ( this.source.data.length == 1 ) {\n            value = this.source.data[0]\n          } else {\n            //check if the path is an array and use path index to get value\n            let pathSlices = this.path.split(\"[\")\n            let index\n            for(let slice of pathSlices) {\n              let slices = slice.split(\"]\")\n              if(Number.isInteger(parseInt(slices[0]))) {\n                index = slices[0]\n              }\n            }\n            if(index || index == 0) {\n              value = this.source.data[index]\n            }\n          }\n          if ( value != null ) {\n            this.value = value\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.value)\n        //console.log(this.source)\n      }\n      let binding = this.binding || this.slotProps.source.binding\n      console.log(\"BINDING1\",binding)\n      let params = undefined\n      let language = this.$i18n.locale\n      if(language){\n        params = { language }\n      }\n      this.$fhirutils.expand( binding,params ).then( items => {\n        this.items = items\n        this.loading = false\n      } ).catch( err => {\n        console.log(err)\n        //this.error = true\n        this.errors.push( err.message )\n        this.loading = false\n      } )\n    }\n  },\n  computed: {\n    index: function () {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    displayValue: function() {\n      let found = this.items.find( item => item.code === this.value )\n      if ( found ) {\n        return found.display\n      } else {\n        return \"\"\n      }\n    },\n    required: function() {\n      return (this.index || 0) < this.min \n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.$t(`App.fhir-resources-texts.${this.display}`)+\" \" + this.$t(`App.hardcoded-texts.is required`) ]\n      } else {\n        return []\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./fhir-code.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./fhir-code.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-code.vue?vue&type=template&id=46a183d0&\"\nimport script from \"./fhir-code.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-code.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\ninstallComponents(component, {VAutocomplete})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.hide)?_c('ihris-element',{attrs:{\"edit\":_vm.edit,\"loading\":_vm.loading},scopedSlots:_vm._u([{key:\"form\",fn:function(){return [_c('v-autocomplete',{attrs:{\"loading\":_vm.loading,\"label\":_vm.display,\"items\":_vm.items.filter(function (x) { return !x.code.includes('(deactivated)'); }),\"outlined\":\"\",\"hide-details\":\"auto\",\"error-messages\":_vm.errors,\"item-text\":\"display\",\"item-value\":\"code\",\"disabled\":_vm.disabled,\"rules\":_vm.rules,\"dense\":\"\"},on:{\"change\":function($event){_vm.errors = []}},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_vm._v(_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.label)))+\" \"),(_vm.required)?_c('span',{staticClass:\"red--text font-weight-bold\"},[_vm._v(\"*\")]):_vm._e()]},proxy:true}],null,false,3654946902),model:{value:(_vm.valueCode),callback:function ($$v) {_vm.valueCode=$$v},expression:\"valueCode\"}})]},proxy:true},{key:\"header\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.display)))+\" \")]},proxy:true},{key:\"value\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.valueDisplay || _vm.value.display || \"\")+\" \")]},proxy:true}],null,false,1368762095)}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-element :edit=\"edit\" :loading=\"loading\" v-if=\"!hide\">\n    <template #form>\n      <v-autocomplete \n        :loading=\"loading\" \n        :label=\"display\" \n        v-model=\"valueCode\" \n        :items=\"items.filter(x => !x.code.includes('(deactivated)'))\"\n        outlined \n        hide-details=\"auto\" \n        :error-messages=\"errors\"\n        item-text=\"display\"\n        item-value=\"code\"\n        :disabled=\"disabled\"\n        :rules=\"rules\"\n        dense\n        @change=\"errors = []\"\n      >\n        <template #label>{{$t(`App.fhir-resources-texts.${label}`)}} <span v-if=\"required\" class=\"red--text font-weight-bold\">*</span></template>\n      </v-autocomplete>\n    </template>\n    <template #header>\n      {{$t(`App.fhir-resources-texts.${display}`)}}\n    </template>\n    <template #value>\n      {{valueDisplay || value.display || \"\"}}\n    </template>\n  </ihris-element>\n</template>\n\n<script>\nimport IhrisElement from \"../ihris/ihris-element.vue\"\nimport { eventBus } from \"@/main\";\nimport { dataDisplay } from \"@/mixins/dataDisplay\"\n\n/*\nconst itemSort = (a,b) => {\n  return (a.display === b.display ? (a.code === b.code ? 0 : (a.code < b.code ? -1: 1)) : (a.display < b.display ? -1 : 1) )\n}\n*/\nexport default {\n  name: \"fhir-coding\",\n  props: [\"field\",\"label\",\"sliceName\",\"targetprofile\",\"min\",\"max\",\"base-min\",\"base-max\",\"slotProps\",\"path\",\"binding\",\"edit\",\"readOnlyIfSet\",\n    \"constraints\", \"displayCondition\", \"enableBehavior\"],\n  components: {\n    IhrisElement\n  },\n  mixins: [dataDisplay],\n  data: function() {\n    return {\n      value: { system: \"\", code: \"\", display: \"\" },\n      valueCode: \"\",\n      valueDisplay: \"\",\n      loading: true,\n      errors: [],\n      //error: false,\n      items: [],\n      source: { path: \"\", data: {}, binding: this.binding },\n      disabled: false,\n      lockWatch: false\n    }\n  },\n  created: function() {\n    //this function is defined under dataDisplay mixin\n    this.hideShowField(this.displayCondition, this.enableBehavior)\n    this.setupData()\n  },\n  watch: {\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH CODING\",this.path,this.slotProps)\n        if ( !this.lockWatch ) {\n          this.setupData()\n        }\n      },\n      deep: true\n    },\n    valueCode: function( code ) {\n      if ( this.items ) {\n        let findValue = this.items.find( item => item.code === code )\n        if ( findValue ) {\n          this.value = findValue\n        }\n      }\n      if ( this.value.system && this.value.code ) {\n        this.$fhirutils.codeLookup( this.value.system, this.value.code, this.binding || this.source.binding ).then( display => {\n          this.valueDisplay = display\n        } )\n      }\n      eventBus.$emit(this.path, this.value.system + \"#\" + this.value.code)\n    }\n  },\n  methods: {\n    setupData: function() {\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {}, \n          binding: this.binding || this.slotProps.source.binding }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n          // Need to see if this works and figure out what it needs to be\n          if ( this.source.data ) {\n            this.value = this.source.data\n            this.valueCode = this.value.code\n            this.lockWatch = true\n            //console.log(\"set\",this.value,this.valueCode)\n          }\n        } else {\n          let expression = this.$fhirutils.pathFieldExpression( this.field )\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, expression )\n          //console.log(\"FPATH info\",this.path,this.slotProps)\n          //console.log(\"FPATH setting value to\",this.field,this.source.data[0],expression,this.slotProps.source.data)\n          let value = null\n          if ( this.source.data.length == 1 ) {\n            value = this.source.data[0]\n          } else {\n            //check if the path is an array and use path index to get value\n            let pathSlices = this.path.split(\"[\")\n            let index\n            for(let slice of pathSlices) {\n              let slices = slice.split(\"]\")\n              if(Number.isInteger(parseInt(slices[0]))) {\n                index = slices[0]\n              }\n            }\n            if(index || index == 0) {\n              value = this.source.data[index]\n            }\n          }\n          if ( value != null ) {\n            this.value = value\n            this.valueCode = this.value.code\n            this.lockWatch = true\n          }\n        }\n        this.disabled = this.readOnlyIfSet && (!!this.valueCode)\n      }\n      let binding = this.binding || this.slotProps.source.binding\n      let params = undefined\n      let language = this.$i18n.locale\n      if(language){\n        params = { language }\n      }\n      this.$fhirutils.expand( binding, params ).then( items => {\n        this.items = items\n        this.loading = false\n      } ).catch( err => {\n        console.log(err)\n        //this.error = true\n        this.errors = err.message\n        this.loading = false\n      } )\n      //console.log(\"CODING\",binding)\n      /*\n      let lastSlash = binding.lastIndexOf('/')\n      let lastPipe = binding.lastIndexOf('|')\n      let valueSetId = binding.slice(lastSlash+1, (lastPipe !== -1 ? lastPipe : binding.length ))\n      //console.log(\"CODING\",lastSlash,lastPipe,valueSetId)\n      fetch(\"/fhir/ValueSet/\"+valueSetId+\"/$expand\").then(response=> {\n        if( response.ok ) {\n          response.json().then(data=>{\n            try {\n              if ( data.expansion.contains && data.expansion.contains.length > 0 ) {\n                if ( data.expansion.contains[0].hasOwnProperty(\"display\") ) {\n                  this.items = data.expansion.contains\n                } else if ( data.compose && data.compose.include ) {\n                  this.items = data.expansion.contains.map( code => {\n                    let include = data.compose.include.find( inc => inc.system === code.system )\n                    if ( include && include.concept ) {\n                      let display = include.concept.find( concept => concept.code === code.code )\n                      if ( display ) {\n                        code.display = display.display\n                      }\n                    }\n                    return code\n                  } )\n                }\n              }\n              this.items.sort( itemSort )\n            } catch(err) {\n              this.error = true\n              this.errors = \"Invalid response from server.\"\n            }\n            this.loading = false\n          }).catch(err=>{\n            this.errors = err.message\n            this.error = true\n            this.loading = false\n          })\n        } else {\n          // Try loading valueset without expansion if expand failed.\n          console.log(\"Failed to get ValueSet Expansion for \"+valueSetId)\n          fetch(\"/fhir/ValueSet/\"+valueSetId).then(response=> {\n            if ( response.ok ) {\n              response.json().then(data=> {\n                this.items = []\n                if ( data.compose && data.compose.include ) {\n                  for( let include of data.compose.include ) {\n                    if ( include.concept ) {\n                      for ( let concept of include.concept ) {\n                        concept.system = include.system\n                        this.items.push( concept )\n                        //this.items.push( { system: include.system, ...concept } )\n                      }\n                    }\n                  }\n                }\n                this.items.sort( itemSort )\n                this.loading = false\n              }).catch(err=>{\n                this.errors = err.message\n                this.error = true\n                this.loading = false\n              })\n            } else {\n              this.error = true\n              this.errors = \"Invalid response from server.\"\n              this.loading = false\n            }\n          }).catch(err=>{\n            this.errors = err.message\n            this.error = true\n            this.loading = false\n          })\n\n        }\n      }).catch(err=>{\n        this.errors = err.message\n        this.error = true\n        this.loading = false\n      })\n      */\n    }\n  },\n  computed: {\n    index: function() {\n      if ( this.slotProps && this.slotProps.input ) return this.slotProps.input.index\n      else return undefined\n    },\n    display: function() {\n      if ( this.slotProps && this.slotProps.input) return this.slotProps.input.label\n      else return this.label\n    },\n    required: function() {\n      return (this.index || 0) < this.min\n    },\n    rules: function() {\n      if ( this.required ) {\n        return [ v => !!v || this.$t(`App.fhir-resources-texts.${this.display}`)+\" \" + this.$t(`App.hardcoded-texts.is required`) ]\n      } else {\n        return []\n      }\n    }\n    /*\n    displayValue: function() {\n      let found = this.items.find( item => item.code === this.valueCode )\n      if ( found ) {\n        return found.display\n      } else {\n        return \"\"\n      }\n    }\n    */\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./fhir-coding.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./fhir-coding.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-coding.vue?vue&type=template&id=62dfec28&\"\nimport script from \"./fhir-coding.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-coding.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\ninstallComponents(component, {VAutocomplete})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ihris-complex-card',{attrs:{\"complexField\":_vm.field,\"slotProps\":_vm.slotProps,\"label\":_vm.label,\"errors\":_vm.errors},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_vm._t(\"default\",null,{\"source\":slotProps.source})]}}],null,true)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <ihris-complex-card\n    :complexField=\"field\"\n    :slotProps=\"slotProps\"\n    :label=\"label\"\n    :errors=\"errors\"\n  >\n    <template #default=\"slotProps\">\n      <slot :source=\"slotProps.source\"></slot>\n    </template>\n  </ihris-complex-card>\n</template>\n\n<script>\nimport IhrisComplexCard from \"../ihris/ihris-complex-card.vue\"\nexport default {\n  name: \"fhir-identifier\",\n  props: [\"field\", \"slotProps\",\"sliceName\",\"min\",\"max\",\"base-min\",\"base-max\",\"label\",\"path\",\"edit\",\"constraints\"],\n  data: function() {\n    return {\n      errors: []\n    }\n  },\n  components: {\n    IhrisComplexCard\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./fhir-identifier.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./fhir-identifier.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./fhir-identifier.vue?vue&type=template&id=5c6756e8&\"\nimport script from \"./fhir-identifier.vue?vue&type=script&lang=js&\"\nexport * from \"./fhir-identifier.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.edit)?_c('v-container',[_vm._t(\"form\")],2):_c('div',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{staticClass:\"font-weight-bold\",attrs:{\"cols\":_vm.$store.state.cols.header}},[_vm._t(\"header\")],2),(_vm.loading)?_c('v-col',{attrs:{\"cols\":_vm.$store.state.cols.content}},[_c('v-progress-linear',{attrs:{\"indeterminate\":\"\",\"color\":\"primary\"}})],1):_c('v-col',{attrs:{\"cols\":_vm.$store.state.cols.content}},[_vm._t(\"value\")],2)],1),_c('v-divider')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-container v-if=\"edit\">\n      <slot name=\"form\"></slot>\n    </v-container>\n    <div v-else>\n      <v-row dense>\n        <v-col :cols=\"$store.state.cols.header\" class=\"font-weight-bold\">\n          <slot name=\"header\"></slot>\n        </v-col>\n        <v-col :cols=\"$store.state.cols.content\" v-if=\"loading\">\n          <v-progress-linear indeterminate color=\"primary\"></v-progress-linear>\n        </v-col>\n        <v-col :cols=\"$store.state.cols.content\" v-else>\n          <slot name=\"value\"></slot>\n        </v-col>\n      </v-row>\n      <v-divider></v-divider>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-element\",\n  props: [ \"edit\", \"loading\" ]\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-element.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-element.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-element.vue?vue&type=template&id=61b3b392&\"\nimport script from \"./ihris-element.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-element.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VContainer,VDivider,VProgressLinear,VRow})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-snackbar',{attrs:{\"id\":\"elementToHide\",\"bottom\":_vm.bottom,\"right\":_vm.bottom,\"timeout\":_vm.timeout,\"color\":\"white\",\"width\":\"320\"},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._b({attrs:{\"icon\":\"\",\"small\":\"\",\"color\":\"green\"},on:{\"click\":function($event){_vm.expand = true}}},'v-btn',attrs,false),[_c('v-icon',[_vm._v(\"mdi-arrow-expand\")])],1)]}}]),model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_c('div',[(_vm.expand)?_c('v-card',{attrs:{\"color\":\"white\",\"elevation\":\"0\",\"height\":\"400\",\"width\":\"320\"}},[_c('template',{slot:\"progress\"},[_c('v-progress-linear',{attrs:{\"color\":\"deep-purple\",\"height\":\"10\",\"indeterminate\":\"\"}})],1),_c('v-card-title',{staticClass:\"pa-0 pb-2 pr-2\"},[_c('h4',{staticClass:\"black--text\"},[_vm._v(_vm._s(_vm.$t((\"App.intro.\" + _vm.title))))]),_c('v-spacer'),_c('v-btn',{staticClass:\"justify-end\",attrs:{\"color\":\"warning\",\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){_vm.expand = false}}},[_c('v-icon',[_vm._v(\"mdi-close-box-multiple-outline\")])],1)],1),_c('hr',{staticClass:\"dotted-divider\"}),_c('br'),_c('v-card-title',{staticClass:\"justify-center\",staticStyle:{\"padding-top\":\"4px\",\"padding-bottom\":\"4px\"}},[(_vm.showImage && _vm.photoURL)?_c('v-avatar',{attrs:{\"size\":\"120\",\"tile\":\"\"}},[_c('img',{attrs:{\"src\":_vm.photoURL,\"alt\":\"photo\"}})]):_vm._e()],1),_c('v-simple-table',{attrs:{\"height\":_vm.showImage?250:'auto',\"light\":\"\"}},[_c('tbody',_vm._l((Object.entries(this.data)),function(ref){\nvar keyName = ref[0];\nvar value = ref[1];\nreturn _c('tr',{key:keyName},[_c('td',{staticClass:\"body-1\",staticStyle:{\"text-align\":\"left\"}},[_c('strong',[_vm._v(_vm._s(_vm.$t((\"App.intro.\" + keyName)))+\":\")])]),_c('td',{staticClass:\"subtitle-1\"},[_vm._v(_vm._s(value))])])}),0)])],2):_vm._e()],1),_c('h4',{staticClass:\"black--text\"},[_vm._v(_vm._s(_vm.$t((\"App.intro.\" + _vm.title))))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-snackbar\n      id=\"elementToHide\"\n      v-model=\"snackbar\"\n      :bottom=\"bottom\"\n      :right=\"bottom\"\n      :timeout=\"timeout\"\n      color=\"white\"\n      width=\"320\"\n  >\n    <div>\n      <v-card v-if=\"expand\" color=\"white\" elevation=\"0\" height=\"400\" width=\"320\">\n        <template slot=\"progress\">\n          <v-progress-linear\n              color=\"deep-purple\"\n              height=\"10\"\n              indeterminate\n          ></v-progress-linear>\n        </template>\n        <v-card-title\n            class=\"pa-0 pb-2 pr-2\"\n        >\n          <h4 class=\"black--text\">{{  $t(`App.intro.${title}`) }}</h4>\n          <v-spacer></v-spacer>\n          <v-btn\n              class=\"justify-end\"\n              color=\"warning\"\n              icon\n              small\n              @click=\"expand = false\"\n          >\n            <v-icon>mdi-close-box-multiple-outline</v-icon>\n          </v-btn>\n        </v-card-title>\n        <hr class=\"dotted-divider\"/>\n        <br>\n        <v-card-title\n            class=\"justify-center\"\n            style=\"padding-top: 4px; padding-bottom: 4px\"\n        >\n          <v-avatar v-if=\"showImage && photoURL\" size=\"120\" tile>\n            <img :src=\"photoURL\" alt=\"photo\"/>\n          </v-avatar>\n        </v-card-title>\n        <v-simple-table :height=\"showImage?250:'auto'\" light>\n          <tbody>\n          <tr v-for=\"[keyName,value] in Object.entries(this.data)\" :key=\"keyName\">\n            <td class=\"body-1\" style=\"text-align: left\"><strong>{{$t(`App.intro.${keyName}`)}}:</strong></td>\n            <td class=\"subtitle-1\">{{ value }}</td>\n          </tr>\n          </tbody>\n        </v-simple-table>\n      </v-card>\n    </div>\n    <h4 class=\"black--text\">{{ $t(`App.intro.${title}`) }}</h4>\n     <template v-slot:action=\"{ attrs }\">\n        <v-btn\n            icon\n          small\n            color=\"green\"\n          v-bind=\"attrs\"\n          @click=\"expand = true\"\n        >\n          <v-icon>mdi-arrow-expand</v-icon>\n        </v-btn>\n      </template>\n  </v-snackbar>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-practitioner-intro\",\n  data: function () {\n    return {\n      practitionerId: undefined,\n      practitioner: {},\n      practitionerRole: {},\n      title: \"\",\n      show: true,\n      snackbar: false,\n      timeout: -1,\n      bottom: true,\n      right: true,\n      showImage: false,\n      photoURL: undefined,\n      data: {},\n      expand: false,\n      page:undefined\n    };\n  },\n  components: {},\n  watch: {\n    slotProps: {\n      practitionerId() {\n        this.setupData();\n      },\n      handler() {\n        if (!this.lockWatch) {\n          this.setupData();\n        }\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    setupData() {\n      if (this.practitionerId) {\n        fetch(`/fhir/PractitionerRole?practitioner=${this.practitionerId}&_sort=-date,-_id`)\n            .then((response) => {\n              response\n                  .json()\n                  .then((data) => {\n                    if (data.entry && data.entry.length) {\n                      let role\n                      if (data.entry[0].resource.code) {\n                        role = data.entry[0].resource;\n                      }\n                      this.practitionerRole = role ? role : \"\";\n                    }\n                  })\n                  .catch((err) => {\n                    console.log(this.field, this.fhirId, err);\n                  });\n            })\n            .catch((err) => {\n              console.log(this.field, this.fhirId, err);\n            });\n        fetch(\"/fhir/Practitioner/\" + this.practitionerId)\n            .then((response) => {\n              response\n                  .json()\n                  .then((data) => {\n                    if (data.resourceType === \"Practitioner\") {\n                      this.practitioner = data;\n                      this.snackbar = true;\n                    }\n\n                  })\n                  .catch((err) => {\n                    console.log(err);\n                  });\n            })\n            .catch((err) => {\n              console.log(err);\n            });\n      }\n    },\n    getParameter() {\n      if(this.$router.history.current?.params?.page){\n        this.page = this.$router.history.current.params.page\n      }\n      if (this.$router.history.current.query) {\n        if (this.$router.history.current?.query[\"PractitionerRole.practitioner.reference\"]) {\n          this.practitionerId = this.$router.history.current.query[\"PractitionerRole.practitioner.reference\"].split(\"/\").pop()\n        }\n        if (this.$router.history.current?.query[\"practitioner\"]) {\n          this.practitionerId = this.$router.history.current.query[\"practitioner\"]\n        }\n      }\n      if (this.$router.history.current.params?.id) {\n        this.practitionerId = this.$router.history.current.params.id\n      }\n      this.setupData()\n      fetch(\"/auth\").then(() => {\n        fetch(\"/config/site\").then(response => {\n          response.json().then(data => {\n            let intro\n            if (data.hasOwnProperty(\"intro\")) {\n              if(data.intro.hasOwnProperty(this.page)){\n                intro = data.intro[this.page]\n              } else {\n                intro = data.intro.default\n              }\n            }\n            this.title = intro.title\n            let internalData = intro.data\n            let keys = Object.keys(internalData)\n            for (let key of keys) {\n              if (internalData[key]?.path && internalData[key]?.path.includes(\",\")) {\n                let paths = internalData[key].path.split(\",\")\n                let finalData = paths.map(path => {\n                  let pathData = this.practitioner\n                  if (path.startsWith(\"PractitionerRole\")) {\n                    pathData = this.practitionerRole\n                  }\n                  return this.$fhirpath.evaluate(pathData, path)\n                })\n                this.data[internalData[key].text] = finalData.join(\",\")\n              } else {\n                let pathData = this.practitioner\n                if (internalData[key]?.path && internalData[key].path.startsWith(\"PractitionerRole\")) {\n                  pathData = this.practitionerRole\n                }\n                let finalData = this.$fhirpath.evaluate(pathData, internalData[key].path)\n                if (internalData[key]?.type === \"photo\") {\n                  this.showImage = true\n                  if (finalData?.length > 0) {\n                    let photo = finalData[0]\n                    if (photo.data && photo.contentType) {\n                      let dataURL = \"data:\" + photo.contentType + \";base64,\" + photo.data;\n                      fetch(dataURL)\n                          .then((res) => res.blob())\n                          .then((blob) => {\n                            this.photoURL = URL.createObjectURL(blob);\n                          })\n                          .catch((e) => {\n                            console.log(\"Failed to get data from base64.\", e);\n                          });\n                    }\n                  }\n                } else {\n                  if (typeof finalData === 'object') {\n                    this.data[internalData[key].text] = finalData.join(\",\")\n                  } else {\n                    this.data[internalData[key].text] = finalData\n                  }\n                }\n              }\n            }\n\n          })\n        })\n      })\n\n    },\n  },\n  mounted() {\n    this.getParameter();\n  }\n}\n</script>\n\n<style scoped>\n.hide {\n  opacity: 0;\n}\n\n.show {\n  opacity: 1;\n}\n\n.v-snack__content {\n  padding: 0; /* Set padding to 0 to remove it */\n}\n\n.dotted-divider {\n  border: none;\n  border-top: 4px dotted green;\n  height: 2px;\n}\n\n@media print {\n    #elementToHide {\n      display: none;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-practitioner-intro.vue?vue&type=template&id=68604648&scoped=true&\"\nimport script from \"./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-practitioner-intro.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ihris-practitioner-intro.vue?vue&type=style&index=0&id=68604648&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68604648\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VAvatar,VBtn,VCard,VCardTitle,VIcon,VProgressLinear,VSimpleTable,VSnackbar,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{key:_vm.pageKey,staticClass:\"my-3\"},[_c('v-form',{ref:\"form\",attrs:{\"id\":\"print\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[(!this.edit)?_c('div',{staticClass:\"print-section\"},[_c('v-btn',{staticClass:\"pr-12\",attrs:{\"id\":\"elementToHide\",\"color\":\"primary\",\"icon\":\"\",\"small\":\"\",\"text\":\"\"},on:{\"click\":_vm.printPage}},[_c('v-icon',[_vm._v(\"mdi-printer-outline\")]),_vm._v(\" \"+_vm._s(_vm.$t(\"App.hardcoded-texts.Print\"))+\" \")],1)],1):_vm._e(),_vm._t(\"default\",null,{\"source\":_vm.source}),_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"color\":\"primary\",\"indeterminate\":\"\",\"size\":\"50\"}})],1),_c('v-navigation-drawer',{staticClass:\"primary darken-1 white--text\",staticStyle:{\"z-index\":\"3\"},attrs:{\"id\":\"elementToHide\",\"app\":\"\",\"clipped\":\"\",\"permanent\":\"\",\"right\":\"\"}},[_c('v-list',{staticClass:\"white--text\"},[(_vm.edit)?_c('v-list-item',[(_vm.edit)?_c('v-btn',{staticClass:\"secondary\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"mdi-close-circle-outline\")]),_c('span',[_vm._v(_vm._s(_vm.$t(\"App.hardcoded-texts.Cancel\")))])],1):_vm._e(),_c('v-spacer'),(_vm.edit)?[(_vm.valid)?_c('v-btn',{staticClass:\"success darken-1\",attrs:{\"disabled\":!_vm.valid,\"dark\":\"\"},on:{\"click\":function($event){return _vm.processFHIR()}}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"mdi-content-save\")]),_c('span',[_vm._v(_vm._s(_vm.$t(\"App.hardcoded-texts.Save\")))])],1):_c('v-btn',{staticClass:\"warning\",attrs:{\"dark\":\"\"},on:{\"click\":function($event){return _vm.$refs.form.validate()}}},[_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(\"mdi-content-save\")]),_c('span',[_vm._v(_vm._s(_vm.$t(\"App.hardcoded-texts.Save\")))])],1)]:_vm._e()],2):_vm._e(),_c('v-divider',{attrs:{\"color\":\"white\"}}),(!_vm.edit && _vm.links && _vm.links.length && _vm.linksready)?_vm._l((_vm.links),function(link,idx){return _c('v-list-item',{key:link.url},[_c('v-btn',{key:link.url,class:link.linkclass,attrs:{\"text\":!link.button,\"to\":_vm.getLinkUrl(link)}},[(link.icon)?_c('v-icon',{attrs:{\"light\":\"\"}},[_vm._v(_vm._s(link.icon))]):_vm._e(),_vm._v(\" \"+_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + (_vm.linktext[idx]))))+\" \")],1)],1)}):_vm._e(),_c('v-divider',{attrs:{\"color\":\"white\"}}),(_vm.sectionMenu)?_c('v-subheader',{staticClass:\"white--text\"},[_c('h2',[_vm._v(_vm._s(_vm.$t(\"App.hardcoded-texts.Sections\")))])]):_vm._e(),_vm._l((_vm.sectionMenu),function(section){return _c('v-list-item',{key:section.name,class:'#section-' + section.name === _vm.path ? 'highlighted' : '',attrs:{\"id\":'#section-' + section.name},on:{\"click\":function($event){return _vm.scrollTo(section.name)}}},[(!_vm.edit || !section.secondary)?_c('v-list-item-content',{staticClass:\"white--text\"},[_c('v-list-item-title',{staticClass:\"text-uppercase\"},[_c('h4',[_vm._v(_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + (section.title)))))])]),_c('v-list-item-subtitle',{staticClass:\"white--text\"},[_vm._v(_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + (section.desc)))))])],1):_vm._e()],1)})],2)],1),(!this.edit)?_c('v-card',{staticClass:\"mx-auto mb-4 rounded-lg\",attrs:{\"max-width\":\"700\",\"outlined\":\"\"}},[_c('v-card-title',{staticClass:\"primary font-weight-bold caption pa-2 white--text justify-center \",attrs:{\"id\":\"elementToHide\"}},[_vm._v(\"Record History \")]),_c('v-card-text',{staticClass:\"my-3\"},[_c('v-row',{staticClass:\"justify-space-between\",attrs:{\"id\":\"elementToHide\"}},[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\"Record Id:\")])]),_c('v-col',{attrs:{\"cols\":\"8\"}},[_vm._v(_vm._s(this.$data.orig.id))])],1),_c('v-divider'),_c('v-row',{staticClass:\"justify-space-between\"},[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\"Last Updated:\")])]),(_vm.$data.orig && _vm.$data.orig.meta)?_c('v-col',{attrs:{\"cols\":\"8\"}},[_vm._v(\" \"+_vm._s(new Date(this.$data.orig.meta.lastUpdated))+\" \")]):_vm._e()],1),_c('v-divider'),_c('v-row',{staticClass:\"justify-space-between\"},[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\"Version:\")])]),(_vm.$data.orig && _vm.$data.orig.meta)?_c('v-col',{attrs:{\"cols\":\"8\"}},[_vm._v(_vm._s(_vm.$data.orig.meta.versionId)+\" of \"+_vm._s(_vm.max))]):_vm._e()],1),_c('v-divider'),_c('v-row',{staticClass:\"justify-space-between\",attrs:{\"id\":\"elementToHide\"}},[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(\"See older version:\")])]),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('v-row',[_c('v-col',{staticClass:\"px-4\",attrs:{\"cols\":\"2\"}},[(_vm.$data.orig.meta)?_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"40px\"},attrs:{\"max\":_vm.max,\"rules\":[_vm.rules.min, _vm.rules.max],\"value\":_vm.$data.orig.meta.versionId,\"hide-details\":\"\",\"min\":\"1\",\"single-line\":\"\",\"type\":\"number\"},model:{value:(_vm.version),callback:function ($$v) {_vm.version=_vm._n($$v)},expression:\"version\"}}):_vm._e()],1),_c('v-col',{staticClass:\"px-4\"},[_c('v-btn',{attrs:{\"disabled\":_vm.version>_vm.max || _vm.version<1,\"color\":\"primary\",\"icon\":\"\",\"small\":\"\"},on:{\"click\":_vm.changeVersion}},[_c('v-icon',[_vm._v(\"mdi-eye\")])],1)],1)],1)],1)],1),_c('v-divider')],1)],1):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style>\n.highlighted {\n  background-color: #5396dc !important;\n}\n</style>\n<template>\n  <v-container :key=\"pageKey\" class=\"my-3\">\n    <v-form\n      id=\"print\"\n      ref=\"form\"\n      v-model=\"valid\"\n    >\n      <div v-if=\"!this.edit\"\n           class=\"print-section\"\n      >\n        <v-btn\n            id=\"elementToHide\"\n            color=\"primary\"\n            icon\n            small\n            text\n            class=\"pr-12\"\n            @click=\"printPage\"\n        >\n          <v-icon>mdi-printer-outline</v-icon>\n            {{$t(`App.hardcoded-texts.Print`)}}\n        </v-btn>\n      </div>\n      <slot :source=\"source\"></slot>\n      <v-overlay :value=\"overlay\">\n        <v-progress-circular\n          color=\"primary\"\n          indeterminate\n          size=\"50\"\n        ></v-progress-circular>\n      </v-overlay>\n\n      <v-navigation-drawer id=\"elementToHide\"\n        app\n        class=\"primary darken-1 white--text\"\n        clipped\n        permanent\n        right\n        style=\"z-index: 3;\"\n      >\n        <v-list class=\"white--text\">\n          <v-list-item v-if=\"edit\">\n            <v-btn v-if=\"edit\" class=\"secondary\" dark @click=\"$router.go(-1)\">\n              <v-icon light>mdi-close-circle-outline</v-icon>\n              <span>{{ $t(`App.hardcoded-texts.Cancel`) }}</span>\n            </v-btn>\n            <v-spacer></v-spacer>\n            <template v-if=\"edit\">\n              <v-btn v-if=\"valid\" :disabled=\"!valid\" class=\"success darken-1\" dark @click=\"processFHIR()\">\n                <v-icon light>mdi-content-save</v-icon>\n                <span>{{ $t(`App.hardcoded-texts.Save`) }}</span>\n              </v-btn>\n              <v-btn v-else class=\"warning\" dark @click=\"$refs.form.validate()\">\n                <v-icon light>mdi-content-save</v-icon>\n                <span>{{ $t(`App.hardcoded-texts.Save`) }}</span>\n              </v-btn>\n            </template>\n          </v-list-item>\n          <v-divider color=\"white\"></v-divider>\n          <template v-if=\"!edit && links && links.length && linksready\">\n            <v-list-item v-for=\"(link,idx) in links\" :key=\"link.url\">\n              <v-btn :key=\"link.url\" :text=\"!link.button\" :to=\"getLinkUrl(link)\" :class=\"link.linkclass\">\n                <v-icon v-if=\"link.icon\" light>{{ link.icon }}</v-icon>\n                {{ $t(`App.fhir-resources-texts.${linktext[idx]}`) }}\n              </v-btn>\n            </v-list-item>\n          </template>\n          <v-divider color=\"white\"></v-divider>\n          <v-subheader v-if=\"sectionMenu\" class=\"white--text\"><h2>{{ $t(`App.hardcoded-texts.Sections`) }}</h2>\n          </v-subheader>\n          <v-list-item\n            v-for=\"section in sectionMenu\"\n            :id=\"'#section-' + section.name\"\n            :key=\"section.name\"\n            :class=\"'#section-' + section.name === path ? 'highlighted' : ''\"\n            @click=\"scrollTo(section.name)\"\n          >\n            <v-list-item-content class=\"white--text\" v-if=\"!edit || !section.secondary\">\n              <v-list-item-title class=\"text-uppercase\"><h4>{{ $t(`App.fhir-resources-texts.${section.title}`) }}</h4></v-list-item-title>\n              <v-list-item-subtitle class=\"white--text\">{{ $t(`App.fhir-resources-texts.${section.desc}`) }}</v-list-item-subtitle>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list>\n\n      </v-navigation-drawer>\n      <v-card v-if=\"!this.edit\"\n        class=\"mx-auto mb-4 rounded-lg\"\n        max-width=\"700\"\n        outlined\n      >\n        <v-card-title id=\"elementToHide\" class=\"primary font-weight-bold caption pa-2 white--text justify-center \">Record History\n        </v-card-title>\n        <v-card-text  class=\"my-3\">\n          <v-row id=\"elementToHide\" class=\"justify-space-between\">\n            <v-col cols=\"4\"><span class=\"font-weight-bold\">Record Id:</span></v-col>\n            <v-col cols=\"8\">{{ this.$data.orig.id }}</v-col>\n          </v-row>\n          <v-divider/>\n          <v-row class=\"justify-space-between\">\n            <v-col cols=\"4\"><span class=\"font-weight-bold\">Last Updated:</span></v-col>\n            <v-col cols=\"8\" v-if=\"$data.orig && $data.orig.meta\">\n              {{ new Date(this.$data.orig.meta.lastUpdated) }}\n            </v-col>\n          </v-row>\n          <v-divider/>\n          <v-row class=\"justify-space-between\">\n            <v-col cols=\"4\"><span class=\"font-weight-bold\">Version:</span></v-col>\n            <v-col cols=\"8\" v-if=\"$data.orig && $data.orig.meta\">{{ $data.orig.meta.versionId }} of {{ max }}</v-col>\n          </v-row>\n          <v-divider/>\n          <v-row id=\"elementToHide\" class=\"justify-space-between\">\n            <v-col cols=\"4\"><span class=\"font-weight-bold\">See older version:</span></v-col>\n            <v-col cols=\"8\">\n              <v-row>\n                <v-col class=\"px-4\" cols=\"2\">\n                  <v-text-field\n                    v-if=\"$data.orig.meta\"\n                    v-model.number=\"version\"\n                    :max=\"max\"\n                    :rules=\"[rules.min, rules.max]\"\n                    :value=\"$data.orig.meta.versionId\"\n                    class=\"mt-0 pt-0\"\n                    hide-details\n                    min=\"1\"\n                    single-line\n                    style=\"width: 40px;\"\n                    type=\"number\"\n                  ></v-text-field>\n                </v-col>\n                <v-col class=\"px-4\">\n                  <v-btn\n                    :disabled=\"version>max || version<1\"\n                    color=\"primary\"\n                    icon\n                    small\n                    @click=\"changeVersion\"\n                  >\n                    <v-icon>mdi-eye</v-icon>\n                  </v-btn>\n                </v-col>\n              </v-row>\n            </v-col>\n          </v-row>\n          <v-divider/>\n        </v-card-text>\n      </v-card>\n    </v-form>\n  </v-container>\n\n</template>\n\n<script>\n\nexport default {\n  name: \"ihris-resource\",\n  props: [\"title\", \"field\", \"fhir-id\", \"page\", \"profile\", \"section-menu\", \"edit\", \"links\", \"mounts\", \"constraints\"],\n  data: function () {\n    return {\n      fhir: {},\n      orig: {},\n      valid: true,\n      source: {data: {}, path: \"\"},\n      mountedSources: {},\n      path: \"\",\n      loading: false,\n      overlay: false,\n      isEdit: false,\n      linktext: [],\n      linksready: false,\n      advancedValid: true,\n      loadingId: false,\n      loadingCv: false,\n      version: 1,\n      max: 1,\n      pageKey: 0,\n      rules: {\n        min: v => v >= 1 || `The Min is 1`,\n        max: v => v <= this.max || `The Max is ${this.max}`\n      },\n    }\n  },\n  created: function () {\n    if (this.fhirId) {\n      this.loading = true\n      //console.log(\"getting\",this.field,this.fhirId)\n      fetch(\"/fhir/\" + this.field + \"/\" + this.fhirId).then(response => {\n        response.json().then(async(data) => {\n          if(this.$store.state.user && this.$store.state.user.obj && this.$store.state.user.obj.resource && this.$store.state.user.obj.resource.extension) {\n            let location = this.$store.state.user.obj.resource.extension.find((ext) => {\n              return ext.url === \"http://ihris.org/fhir/StructureDefinition/ihris-user-location\"\n            })\n            if(location) {\n              let relatedGrp = data.extension.find((ext) => {\n                return ext.url === \"http://ihris.org/fhir/StructureDefinition/ihris-related-group\"\n              })\n              if(relatedGrp) {\n                let dataLocation = relatedGrp.extension.find((ext) => {\n                  return ext.url === \"location\"\n                })\n                if(dataLocation) {\n                  let canSee = relatedGrp.extension.find((ext) => {\n                    return ext.url === \"location\" && ext.valueString === location.valueReference.reference\n                  })\n                  if(!canSee) {\n                    this.$store.state.message.active = true\n                    this.$store.state.message.type = \"error\"\n                    this.$store.state.message.text = \"You dont have access to view this record\"\n                    this.$router.push({path: \"/\"})\n                  }\n                }\n              }\n            }\n          }\n          //this.$store.commit('setCurrentResource', data)\n          this.max = data.meta.versionId\n          this.orig = data\n          this.source = {data: data, path: this.field}\n          await this.setMountedRefs(data)\n          this.setLinkText()\n          this.linksready = true\n          this.loading = false\n        }).catch(err => {\n          console.log(this.field, this.fhirId, err)\n        })\n      }).catch(err => {\n        console.log(this.field, this.fhirId, err)\n      })\n    } else if (this.$route.query) {\n      let presets = {\n        resourceType: this.field\n      }\n      let hasPresets = false\n      for (let path of Object.keys(this.$route.query)) {\n        if (path.startsWith(this.field + \".\")) {\n          hasPresets = true\n          let elements = path.substring(this.field.length + 1).split('.')\n          let last = elements.pop()\n          let current = presets\n          for (let element of elements) {\n            if (element.includes('[')) {\n              try {\n                let parts = element.split('[')\n                let name = parts[0]\n                let idx = parts[1].slice(0, -1)\n                if (!current.hasOwnProperty(name)) {\n                  current[name] = []\n                }\n                if (idx) {\n                  let next = {}\n                  current[name][parseInt(idx)] = next\n                  current = next\n                } else {\n                  let next = {}\n                  current[name].push(next)\n                  current = next\n                }\n              } catch (err) {\n                console.log(\"Unable to process\", path)\n\n              }\n            } else {\n              if (!current.hasOwnProperty(element)) {\n                current[element] = {}\n                current = current[element]\n              }\n            }\n          }\n          if (last.includes('[')) {\n            try {\n              let parts = last.split('[')\n              let name = parts[0]\n              let idx = parts[1].slice(0, -1)\n              if (!current.hasOwnProperty(name)) {\n                current[name] = []\n              }\n              if (idx) {\n                current[name][parseInt(idx)] = this.$route.query[path]\n              } else {\n                current[name].push(this.$route.query[path])\n              }\n\n            } catch (err) {\n              console.log(\"Unable to process\", path)\n\n            }\n          } else {\n            current[last] = this.$route.query[path]\n          }\n        }\n      }\n      if (hasPresets) {\n        this.source = {data: presets, path: this.field}\n      }\n    }\n  },\n  computed: {\n    hasFhirId: function () {\n      if (this.fhirId == '') {\n        return false\n      } else if (!this.fhirId) {\n        return false\n      } else {\n        return true\n      }\n    }\n    /*\n    source: function() {\n      return this.$store.state.fhir\n    }\n    */\n  },\n  methods: {\n    scrollTo(section) {\n      document.getElementById(`section-${section}`).scrollIntoView()\n    },\n    handleScroll() {\n      this.hasScrolled = window.top.scrollY >= 100;\n      this.sectionMenu.map((data) => {\n        let divs = document.getElementById(`section-${data.name}`);\n        let sectionTop = divs.offsetTop;\n        if (pageYOffset >= sectionTop) {\n          this.path = `#section-${data.name}`;\n        }\n      });\n    },\n    setMountedRefs() {\n      return new Promise((resolve) => {\n        if(!this.mounts || this.mounts.length === 0) {\n          return resolve()\n        }\n        let mount = this.mounts.shift()\n        let first = mount.fromref.split(\".\")[0]\n        let resource\n        if(this.mountedSources[first]) {\n          resource = {}\n          resource[first] = this.mountedSources[first]\n        } else {\n          resource = this.source.data\n        }\n        let content = this.$fhirpath.evaluate(resource, mount.fromref)\n        if(content) {\n          fetch(\"/fhir/\" + content[0].split(\"/\")[0] + \"/\" + content[0].split(\"/\")[1]).then((response) => {\n            response.json().then(async(data) => {\n              this.mountedSources[mount.name] = data\n              if(this.mounts.length > 0) {\n                await this.setMountedRefs(data)\n                resolve()\n              } else {\n                resolve()\n              }\n            })\n          })\n        } else {\n          resolve()\n        }\n      })\n    },\n    getLinkField: function (field) {\n      let content = this.$fhirpath.evaluate(this.source.data, field)\n      if (content) {\n        return content[0]\n      } else {\n        return false\n      }\n    },\n    getMountedLinkParameters(url) {\n      let urlPortions = url.split(\"{\")\n      let params = []\n      for(let portion of urlPortions) {\n        if(portion.includes(\"}\")) {\n         let param = portion.split(\"}\")[0]\n         params.push(param)\n        }\n      }\n      return params\n    },\n    getLinkUrl: function (link) {\n      let mountedParams = this.getMountedLinkParameters(link.url)\n      if(mountedParams.length > 0) {\n        for(let param of mountedParams) {\n          let val = this.$fhirpath.evaluate(this.mountedSources, param)\n          if(val) {\n            if (val[0].includes('/')) {\n              let ref = val[0].split('/')\n              val[0] = ref[1]\n            }\n            link.url = link.url.replace(\"{\" + param + \"}\", val[0])\n          }\n        }\n      }\n      let field\n      if (link.field) {\n        field = this.getLinkField(link.field)\n      }\n      if (field) {\n        if (field.includes('/')) {\n          let ref = field.split('/')\n          field = ref[1]\n        }\n        return link.url.replace(\"FIELD\", field)\n      } else {\n        return link.url\n      }\n    },\n    setLinkText: function () {\n      for (let idx in this.links) {\n        let link = this.links[idx]\n        if (link.text) {\n          this.$set(this.linktext, idx, link.text)\n        } else if (link.field) {\n          let field = this.getLinkField(link.field)\n          if (field) {\n            this.$fhirutils.lookup(field).then(display => {\n              this.$set(this.linktext, idx, display)\n            })\n          }\n        }\n      }\n    },\n    processFHIR: async function () {\n      this.$refs.form.validate()\n      if (!this.valid) return\n      this.advancedValid = true\n      this.overlay = true\n      this.loading = true\n\n      //const processChildren = function( parent, obj, children ) {\n      const processChildren = async (parent, obj, children) => {\n        //console.log(\"called on \"+parent)\n\n        for (let child of children) {\n\n          let fullField = parent\n\n          let next = obj\n\n          if (child.field && !child.fieldType /* ignore arrays */) {\n            //console.log(\"working on \"+parent+\" . \"+child.field)\n            let field\n            if (child.sliceName) {\n              if (child.field.startsWith(\"value[x]\")) {\n                field = child.field.substring(9)\n                fullField += \".\" + field\n              } else {\n                field = child.field.replace(\":\" + child.sliceName, \"\")\n                fullField += \".\" + field\n              }\n            } else {\n              field = child.field\n              fullField += \".\" + field\n            }\n            if (child.max !== \"1\" || child.baseMax !== \"1\") {\n              if (!obj.hasOwnProperty(field)) {\n                next[field] = []\n              }\n            } else {\n              next[field] = {}\n            }\n            //console.log(fullField)\n            //console.log(child.max, child.baseMax)\n            //console.log(child)\n            if (child.hasOwnProperty(\"value\")) {\n              //console.log( fullField +\"=\"+ child.value )\n              if (Array.isArray(next[field])) {\n                next[field].push(child.value)\n              } else {\n                next[field] = child.value\n              }\n              next = next[field]\n            } else {\n              if (Array.isArray(next[field])) {\n                let sub = {}\n                if (child.profile) {\n                  sub.url = child.profile\n                } else if (field === \"extension\" && child.sliceName) {\n                  sub.url = child.sliceName\n                }\n                next[field].push(sub)\n                next = sub\n              } else {\n                next = next[field]\n              }\n            }\n          }\n\n          if (child.$children) {\n            try {\n              await processChildren(fullField, next, child.$children)\n            } catch (err) {\n              this.advancedValid = false\n              console.log(err)\n            }\n          }\n          if (child.constraints) {\n            child.errors = []\n            try {\n              this.advancedValid = this.advancedValid && await this.$fhirutils.checkConstraints(child.constraints,\n                  this.constraints, next, child.errors, this.fhirId)\n            } catch (err) {\n              this.advancedValid = false\n              child.errors.push(\"An unknown error occurred.\")\n              console.log(err)\n            }\n          }\n\n        }\n\n      }\n\n      //console.log(this.field)\n      this.fhir = {\n        resourceType: this.field,\n        meta: {\n          profile: [this.profile]\n        }\n      }\n      //console.log(this)\n      try {\n        await processChildren(this.field, this.fhir, this.$children)\n      } catch (err) {\n        this.advancedValid = false\n        console.log(err)\n      }\n      if (!this.advancedValid) {\n        this.overlay = false\n        this.loading = false\n        this.$store.commit('setMessage', {type: 'error', text: 'There were errors on the form.'})\n        return\n      }\n      console.log(\"FINISHED PROCESS AND CHECK.\")\n      let url = \"/fhir/\" + this.field\n      let opts = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/fhir+json\"\n        },\n        redirect: 'manual',\n      }\n      if (this.fhirId) {\n        this.fhir.id = this.fhirId\n        url += \"/\" + this.fhirId\n        opts.method = \"PUT\"\n      }\n      opts.body = JSON.stringify(this.fhir)\n      fetch(url, opts).then(response => {\n        //console.log(response.headers)\n        if (response.status === 201 || response.status === 200) {\n          response.json().then(data => {\n            this.overlay = false\n            this.loading = false\n\n            if (this.fhirId) {\n              this.$store.commit(\"setMessage\", {\n                type: \"success\",\n                text: \"Update successful.\",\n              });\n              setTimeout(() => this.$router.go(0), 1000);\n            } else {\n              this.$router.push({name: \"resource_view\", params: {page: this.page, id: data.id}})\n            }\n          })\n        }\n      })\n    },\n    changeVersion() {\n      fetch(\"/fhir/vRead\" + \"/\" + this.field + \"/\" + this.fhirId + \"/\" + this.version)\n          .then((response) => {\n            response\n                .json()\n                .then((data) => {\n                  this.orig = data;\n                  this.source = {data: data, path: this.field};\n                  this.setLinkText();\n                  this.loading = false;\n                  this.pageKey += 1;\n                })\n                .catch((err) => {\n                  console.log(this.field, this.fhirId, err);\n                });\n          })\n          .catch((err) => {\n            console.log(this.field, this.fhirId, err);\n          });\n    },\n    printPage() {\n      this.$root.$emit(\"printPage\", true);\n      this.$nextTick(() => {\n        let contents = document.getElementById(\"print\").innerHTML;\n        let stylesHtml = '';\n        for (const node of [...document.querySelectorAll('link[rel=\"stylesheet\"], style')]) {\n          stylesHtml += node.outerHTML;\n        }\n        let windowsFrame = document.createElement('iframe');\n\n        windowsFrame.name = \"windowsFrame\";\n        windowsFrame.style.position = \"absolute\";\n        windowsFrame.style.top = \"-1000000px\";\n        document.body.appendChild(windowsFrame);\n        let frameDoc = windowsFrame.contentWindow ? windowsFrame.contentWindow : windowsFrame.contentDocument.document ? windowsFrame.contentDocument.document : windowsFrame.contentDocument;\n        frameDoc.document.write(`<!DOCTYPE html>\n                  <html>\n                    <head>\n                      ${stylesHtml}\n                      <style>\n                </style>\n                    </head>\n                      ${contents}\n                    </body>\n                  </html>`);\n        const sectionLanguage = frameDoc.document.getElementById('section-language');\n        if (sectionLanguage) {\n          const headerElement = sectionLanguage.querySelector('.v-card__title');\n          if (sectionLanguage.textContent.trim().length === headerElement.textContent.trim().length) {\n            sectionLanguage.style.display = 'none';\n          }\n        }\n\n        const elementsToHide = frameDoc.document.querySelectorAll('#section-element-to-hide');\n        elementsToHide.forEach(element => {\n          const parentSection = element.closest('.ihris-section');\n          if (parentSection) {\n            parentSection.style.display = 'none';\n          }\n        });\n        frameDoc.document.close();\n        setTimeout(function () {\n          window.frames[\"windowsFrame\"].focus();\n          window.frames[\"windowsFrame\"].print();\n          document.body.removeChild(windowsFrame);\n        }, 500);\n        return false;\n      })\n    }\n  }\n}\n\n</script>\n<style scoped>\n.print-section {\n    max-width: 700px;\n    margin: 0 auto; /* Center align */\n    text-align: right; /* Align text to the right */\n}\n@media print {\n  #elementToHide {\n      display: none;\n    }\n  div, div * {\n    font-family: 'Roboto', sans-serif!important;\n    color: black!important;\n  }\n  button {\n      display: none;\n    }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-resource.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-resource.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-resource.vue?vue&type=template&id=48431308&scoped=true&\"\nimport script from \"./ihris-resource.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-resource.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ihris-resource.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./ihris-resource.vue?vue&type=style&index=1&id=48431308&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"48431308\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCol,VContainer,VDivider,VForm,VIcon,VList,VListItem,VListItemContent,VListItemSubtitle,VListItemTitle,VNavigationDrawer,VOverlay,VProgressCircular,VRow,VSpacer,VSubheader,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.edit)?_c('v-container',{staticClass:\"my-3\",attrs:{\"id\":_vm.computedId}},[(_vm.emptyDisplay != 'false')?_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.translatedHeader,\"items\":_vm.items,\"item-key\":\"id\",\"items-per-page\":_vm.itemsPerPage,\"loading\":_vm.loading,\"dense\":\"\",\"footer-props\":{ 'items-per-page-text':_vm.$t('App.hardcoded-texts.tableText'), 'items-per-page-options': _vm.itemsPerPageOptions }},scopedSlots:_vm._u([{key:\"top\",fn:function(){return [_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\" \"+_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.title)))+\" \")]),_c('v-spacer'),_vm._l((_vm.topActions),function(action){return _c('v-btn',{key:action.text,attrs:{\"to\":_vm.setupLink( action.link, {} ),\"color\":action.class,\"id\":\"elementToHide\",\"small\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + (action.text))))+\" \")])})],2)]},proxy:true},{key:\"item._action\",fn:function(ref){\nvar item = ref.item;\nreturn _vm._l((item.actions),function(action){return _c('v-btn',{key:action.text,attrs:{\"to\":_vm.setupLink( action.link, item ),\"color\":action.class,\"small\":\"\",\"rounded\":\"\",\"id\":\"elementToHide\"}},[_vm._v(\" \"+_vm._s(action.text)+\" \")])})}}],null,false,1330114862)}):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container :id=\"computedId\" class=\"my-3\" v-if=\"!edit\">\n    <v-data-table\n      v-if=\"emptyDisplay != 'false'\"\n      :headers=\"translatedHeader\"\n      :items=\"items\"\n      item-key=\"id\"\n      :items-per-page=\"itemsPerPage\"\n      :loading=\"loading\"\n      class=\"elevation-1\"\n      dense\n      :footer-props=\"{ 'items-per-page-text':$t('App.hardcoded-texts.tableText'), 'items-per-page-options': itemsPerPageOptions }\"\n    >\n      <template v-slot:top>\n        <v-toolbar flat color=\"white\">\n          <v-toolbar-title>\n            {{ $t(`App.fhir-resources-texts.${title}`) }}\n          </v-toolbar-title>\n          <v-spacer></v-spacer>\n          <v-btn\n            v-for=\"action in topActions\"\n            :to=\"setupLink( action.link, {} )\"\n            :color=\"action.class\"\n            :key=\"action.text\"\n            id=\"elementToHide\"\n            small\n            >\n            {{ $t(`App.fhir-resources-texts.${action.text}`) }}\n          </v-btn>\n        </v-toolbar>\n      </template>\n      <template v-slot:item._action=\"{ item }\">\n        <v-btn\n          v-for=\"action in item.actions\"\n          :to=\"setupLink( action.link, item )\"\n          :color=\"action.class\"\n          :key=\"action.text\"\n          small\n          rounded\n          id=\"elementToHide\"\n          >\n          {{ action.text }}\n        </v-btn>\n      </template>\n    </v-data-table>\n  </v-container>\n</template>\n\n<script>\nconst isObject = (obj) => {\n  return (!!obj) && (obj.constructor === Object)\n}\n\nexport default {\n  name: \"ihris-secondary\",\n  props: [\"title\", \"field\", \"profile\", \"slotProps\", \"link-id\", \"link-field\",\n    \"search-field\", \"search-field-target\", \"edit\", \"columns\", \"actions\", \"empty-display\",\"dateFormat\"],\n  data: function() {\n    return {\n      source: { data: {}, path: this.field },\n      empty: true,\n      itemsPerPage: 5,\n      itemsPerPageOptions: [5,10,20,50,{ text: 'All', value: -1 }],\n      items: [],\n      loading: true,\n      topActions: [],\n      translatedHeader:[]\n    }\n  },\n  mounted: function() {\n    this.setupData()\n    this.$root.$on(\"printPage\", this.setItemsPerPageForPrint)\n\n  },\n  watch: {\n    /*\n    slotProps: {\n      handler() {\n        this.setupData()\n      },\n      deep: true\n    }\n    */\n  },\n  methods: {\n    setupData: function() {\n      this.translatedHeader =  this.columns.map((x)=> ({\n        text: this.$t(`App.fhir-resources-texts.${x.text}`),\n        value: x.value\n      }))\n      /*\n      if ( this.slotProps && this.slotProps.source ) {\n        this.source = { path: this.field, data: {} }\n        if ( this.slotProps.source.fromArray ) {\n          this.source.data = this.slotProps.source.data\n        } else {\n          this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, this.field )\n        }\n        //console.log(this.source)\n      }\n      */\n      let url\n      //for searchfield in the form Location:organization with Location being the primary resource, then use _include to retrieve secondary resources\n      if(this.searchField.split(':').length === 2) {\n        let resource = this.searchField.split(':')[0]\n        url = \"fhir/\" + resource + \"?_id=\" + this.linkId + \"&_include=\" + this.searchField\n      } else {\n        url = \"/fhir/\" + this.field\n        let queryStr = []\n        if ( this.profile ) {\n          queryStr.push( \"_profile=\"+this.profile )\n        }\n        let filterValue = \"\"\n        if(this.searchFieldTarget) {\n          filterValue = this.searchFieldTarget + \"/\"\n        }\n        filterValue += this.linkId\n        if ( this.searchField ) {\n          queryStr.push( this.searchField+\"=\"+filterValue )\n        } else {\n          queryStr.push( this.linkField.substring( this.linkField.indexOf('.') +1 ) +\"=\"+filterValue )\n        }\n        url += \"?\" + queryStr.join(\"&\")\n      }\n      url += '&_sort=-_id'\n      this.items = []\n      this.loading = true\n      this.addItems( url )\n    },\n    addItems: function (url) {\n      fetch( url ).then( response => {\n        if ( response.status === 200 ) {\n          response.json().then( async data => {\n            if ( data.entry && data.entry.length > 0 ) {\n              for( let entry of data.entry ) {\n                if(this.searchField.split(':').length === 2 && entry.resource.resourceType === this.searchField.split(':')[0]) {\n                  continue\n                }\n                let row = { id: entry.resource.id }\n                for( let header of this.columns ) {\n                  if ( header.value === \"_action\" ) continue\n                  try {\n                    let content = this.$fhirpath.evaluate( entry.resource, header.value )\n                    row[header.value] = await this.processContent( content )\n                  } catch ( err ) {\n                    console.log(err)\n                  }\n                }\n                if ( !row.actions ) row.actions = []\n                for( let action of this.actions ) {\n                  if ( action.row ) {\n                    if ( action.condition ) {\n                      let meets = this.$fhirpath.evaluate( entry.resource, action.condition )\n                      if ( meets.every( meet => meet ) ) {\n                        row.actions.push( action )\n                      }\n                    } else {\n                      row.actions.push( action )\n                    }\n                  } else {\n                    //non row actions has to be tested against the latest resource\n                    if ( action.condition ) {\n                      let meets = this.$fhirpath.evaluate( data.entry[0].resource, action.condition )\n                      if ( action.hasOwnProperty(\"meets\") ) {\n                        action.meets = action.meets && meets.every( meet => meet )\n                      } else {\n                        action.meets = meets.every( meet => meet )\n                      }\n                    } else {\n                      action.meets = true\n                    }\n                  }\n                }\n                if(this.dateFormat){\n                  const dateRegex = /\\d{4}-\\d{2}-\\d{2}/g;\n                  row = JSON.parse(JSON.stringify(row).replace(dateRegex,  match => {\n                  return this.$moment(match).format(this.dateFormat);\n                }));\n                }\n                this.items.push( row )\n              }\n            } else {\n              for( let action of this.actions ) {\n                if ( !action.row ) {\n                  action.meets = action.emptyDisplay\n                }\n              }\n            }\n            this.topActions = this.actions.filter( action => !action.row && action.meets )\n\n\n            if ( data.link ) {\n              let next = data.link.find( link => link.relation === \"next\" )\n              if ( next ) {\n                this.addItems( next.url )\n              } else {\n                this.loading = false\n              }\n            } else {\n              this.loading = false\n            }\n          } ).catch( err => {\n            this.loading = false\n            console.log(err)\n          } )\n        } else {\n          this.loading = false\n          console.log(\"Unable to fetch\",url,response.status)\n        }\n      } ).catch( err => {\n        this.loading = false\n        console.log(err)\n      } )\n\n    },\n    processContent: async function( content ) {\n      if ( Array.isArray( content ) ) {\n        let output = await Promise.all(content.map( this.processContent ))\n        return output.join(\" \")\n      } else if ( isObject( content ) ) {\n        if ( content.code && content.system ) {\n          return await this.$fhirutils.codeLookup( content.system, content.code )\n        } else if ( content.display ) {\n          return content.display\n        } else if ( content.code ) {\n          return content.code\n        } else if ( content.reference ) {\n          return await this.$fhirutils.resourceLookup( content.reference)\n        } else {\n          console.log(\"Unable to process content:\",content)\n          return \"Unknown\"\n        }\n      } else {\n        return content\n      }\n    },\n    setupLink( link, item ) {\n      return link.replace( \"ITEMID\", item.id ).replace( \"FHIRID\", this.linkId )\n    },\n    setItemsPerPageForPrint() {\n      this.itemsPerPage = -1\n    },\n  },\n  computed: {\n    computedId() {\n      return this.items.length > 0 ? \"\" : 'section-element-to-hide';\n    }\n  }\n}\n\n</script>\n\n<style>\ntbody tr:nth-of-type(even) {\n  background-color: #E0F2F1;\n}\n\n@media print {\n    #elementToHide {\n      display: none;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-secondary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-secondary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-secondary.vue?vue&type=template&id=084b5526&\"\nimport script from \"./ihris-secondary.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-secondary.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ihris-secondary.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VContainer,VDataTable,VSpacer,VToolbar,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.edit || !_vm.secondary)?_c('div',{staticClass:\"ihris-section mb-3\",attrs:{\"id\":'section-'+_vm.name}},[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"700\",\"outlined\":\"\"}},[_c('v-card-title',{staticClass:\"primary darken-1 white--text text-uppercase font-weight-bold\"},[_vm._v(_vm._s(_vm.$t((\"App.fhir-resources-texts.\" + _vm.title)))+\" \")]),_c('v-card-text',{staticClass:\"my-3\"},[_vm._t(\"default\",null,{\"source\":_vm.slotProps.source},{isEmpty: _vm.isEmpty})],2)],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :id=\"'section-'+name\" class=\"ihris-section mb-3\" v-if=\"!edit || !secondary\" >\n    <v-card\n      class=\"mx-auto\"\n      max-width=\"700\"\n      outlined\n      >\n      <v-card-title class=\"primary darken-1 white--text text-uppercase font-weight-bold\">{{ $t(`App.fhir-resources-texts.${title}`) }}\n      </v-card-title>\n      <v-card-text class=\"my-3\">\n        <slot :source=\"slotProps.source\" v-bind=\"{isEmpty}\"></slot>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ihris-section\",\n  props: [\"name\", \"slotProps\",\"title\",\"description\", \"edit\", \"secondary\"],\n  data: function() {\n    return {\n      //source: { path: \"\", data: {} }\n    }\n  },\n  created: function() {\n    //this.setupData()\n  },\n  watch: {\n    /*\n    slotProps: {\n      handler() {\n        //console.log(\"WATCH SECTION\",this.path,this.slotProps.source)\n        this.setupData()\n      },\n      deep: true\n    }\n    */\n  },\n  methods: {\n    isEmpty() {\n      console.log('empty');\n    }\n    /*\n    setupData: function() {\n      if ( this.slotProps.source ) {\n        this.source = { path: this.slotProps.source.path+\".\"+this.field, data: {} }\n        this.source.data = this.$fhirpath.evaluate( this.slotProps.source.data, this.field )\n      }\n    }\n    */\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-section.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ihris-section.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ihris-section.vue?vue&type=template&id=ffde0b70&\"\nimport script from \"./ihris-section.vue?vue&type=script&lang=js&\"\nexport * from \"./ihris-section.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\ninstallComponents(component, {VCard,VCardText,VCardTitle})\n"],"names":["mixins","Themeable","extend","name","props","inset","Boolean","render","h","staticClass","class","this","themeClasses","attrs","$attrs","on","$listeners","$slots","default","_vm","_h","$createElement","_c","_self","hide","_e","edit","loading","scopedSlots","_u","key","fn","$t","display","items","filter","x","code","includes","errors","disabled","rules","$event","_v","_s","proxy","model","value","callback","$$v","expression","displayValue","staticRenderFns","components","IhrisElement","data","source","path","binding","lockWatch","created","watch","slotProps","handler","deep","eventBus","methods","setupData","index","console","params","language","catch","err","computed","required","component","VAutocomplete","label","valueCode","valueDisplay","system","field","_t","IhrisComplexCard","$store","state","cols","header","content","VCol","bottom","timeout","ref","_b","expand","snackbar","slot","title","staticStyle","showImage","photoURL","_l","Object","entries","keyName","practitionerId","practitioner","practitionerRole","show","right","page","fetch","then","response","json","role","getParameter","intro","pathData","res","blob","e","mounted","VAvatar","pageKey","valid","printPage","overlay","$router","go","processFHIR","$refs","form","validate","links","length","linksready","link","idx","url","linkclass","button","getLinkUrl","icon","linktext","section","scrollTo","secondary","$data","orig","id","meta","Date","lastUpdated","versionId","max","min","version","_n","changeVersion","fhir","mountedSources","isEdit","advancedValid","loadingId","loadingCv","resourceType","hasPresets","current","hasFhirId","document","handleScroll","setMountedRefs","resource","resolve","getLinkField","getMountedLinkParameters","val","setLinkText","fullField","next","sub","child","profile","type","text","method","headers","redirect","opts","setTimeout","stylesHtml","windowsFrame","frameDoc","contents","sectionLanguage","elementsToHide","parentSection","window","VBtn","computedId","emptyDisplay","translatedHeader","itemsPerPage","itemsPerPageOptions","action","setupLink","item","isObject","empty","topActions","queryStr","filterValue","addItems","row","processContent","setItemsPerPageForPrint","isEmpty","VCard"],"sourceRoot":""}